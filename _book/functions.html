<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Functions | R package workshop</title>
  <meta name="description" content="<p>These are the materials for the R package development workshop created by
COMBINE, an association for Australian students in bioinformatics,
computational biology and related fields.</p>
This workshop explains the basics of R package development and takes you
through the steps to create a minimal R package." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Functions | R package workshop" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>These are the materials for the R package development workshop created by
COMBINE, an association for Australian students in bioinformatics,
computational biology and related fields.</p>
This workshop explains the basics of R package development and takes you
through the steps to create a minimal R package." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Functions | R package workshop" />
  
  <meta name="twitter:description" content="<p>These are the materials for the R package development workshop created by
COMBINE, an association for Australian students in bioinformatics,
computational biology and related fields.</p>
This workshop explains the basics of R package development and takes you
through the steps to create a minimal R package." />
  

<meta name="author" content="COMBINE Australia" />


<meta name="date" content="2019-08-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="setting-up.html">
<link rel="next" href="checking-you-package.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R package development workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-workshop"><i class="fa fa-check"></i>About this workshop</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#requirements"><i class="fa fa-check"></i>Requirements</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-and-rstudio"><i class="fa fa-check"></i>R and RStudio</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#github"><i class="fa fa-check"></i>GitHub</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-a-package"><i class="fa fa-check"></i><b>1.1</b> What is a package?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#why-write-a-package"><i class="fa fa-check"></i><b>1.2</b> Why write a package?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#packages-for-writing-packages"><i class="fa fa-check"></i><b>1.2.1</b> Packages for writing packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setting-up.html"><a href="setting-up.html"><i class="fa fa-check"></i><b>2</b> Setting up</a><ul>
<li class="chapter" data-level="2.1" data-path="setting-up.html"><a href="setting-up.html#open-rstudio"><i class="fa fa-check"></i><b>2.1</b> Open RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="setting-up.html"><a href="setting-up.html#naming-your-package"><i class="fa fa-check"></i><b>2.2</b> Naming your package</a></li>
<li class="chapter" data-level="2.3" data-path="setting-up.html"><a href="setting-up.html#creating-your-package"><i class="fa fa-check"></i><b>2.3</b> Creating your package</a></li>
<li class="chapter" data-level="2.4" data-path="setting-up.html"><a href="setting-up.html#filling-in-the-description"><i class="fa fa-check"></i><b>2.4</b> Filling in the DESCRIPTION</a><ul>
<li class="chapter" data-level="2.4.1" data-path="setting-up.html"><a href="setting-up.html#title-and-description"><i class="fa fa-check"></i><b>2.4.1</b> Title and description</a></li>
<li class="chapter" data-level="2.4.2" data-path="setting-up.html"><a href="setting-up.html#authors"><i class="fa fa-check"></i><b>2.4.2</b> Authors</a></li>
<li class="chapter" data-level="2.4.3" data-path="setting-up.html"><a href="setting-up.html#license"><i class="fa fa-check"></i><b>2.4.3</b> License</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#adding-a-function"><i class="fa fa-check"></i><b>3.1</b> Adding a function</a></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#using-the-function"><i class="fa fa-check"></i><b>3.2</b> Using the function</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="checking-you-package.html"><a href="checking-you-package.html"><i class="fa fa-check"></i><b>4</b> Checking you package</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R package workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1">
<h1><span class="header-section-number">3</span> Functions</h1>
<div id="adding-a-function" class="section level2">
<h2><span class="header-section-number">3.1</span> Adding a function</h2>
<p>Now that our package is all set up it’s time to add our first function! We can
use the <code>usethis::use_r()</code> function to set up the file. Our function is going
to be about colours so we will use that as the name of the R file.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">usethis<span class="op">::</span><span class="kw">use_r</span>(<span class="st">&quot;colours&quot;</span>)</a></code></pre></div>
<blockquote>
<p><strong>Organising your code</strong></p>
<p>There are no rules about how to organise your functions into different files
but you want generally want to group similar functions into a file with a
a clear name. Having all of your functions in a single file isn’t great, but
neither is having a separate file for each function. A good rule of thumb is
that if you are finding it hard to locate a function you might need to move
it to a new file. There are two shortcuts for finding functions in RStudio,
selecting a function name and pressing <strong>F2</strong> or pressing <strong>Ctrl + .</strong> and
searching for the function.</p>
</blockquote>
<p>As an example we are going to write a function that takes the red, green and
blue values for a colour and returns a given number of shades. Copy the
following code into your R file and save it (you can ignore the comments if you
want to, they are just there to explain how the function works).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">make_shades &lt;-<span class="st"> </span><span class="cf">function</span>(red, green, blue, n, <span class="dt">lighter =</span> <span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb11-2" title="2">    <span class="co"># Convert the colour to RGB</span></a>
<a class="sourceLine" id="cb11-3" title="3">    colour_rgb &lt;-<span class="st"> </span>grDevices<span class="op">::</span><span class="kw">col2rgb</span>(colour)[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb11-4" title="4">    </a>
<a class="sourceLine" id="cb11-5" title="5">    <span class="co"># Decide if we are heading towards white or black</span></a>
<a class="sourceLine" id="cb11-6" title="6">    <span class="cf">if</span> (lighter) {</a>
<a class="sourceLine" id="cb11-7" title="7">        end &lt;-<span class="st"> </span><span class="dv">255</span></a>
<a class="sourceLine" id="cb11-8" title="8">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb11-9" title="9">        end &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb11-10" title="10">    }</a>
<a class="sourceLine" id="cb11-11" title="11"></a>
<a class="sourceLine" id="cb11-12" title="12">    <span class="co"># Calculate the red, green and blue for the shades</span></a>
<a class="sourceLine" id="cb11-13" title="13">    <span class="co"># we calculate one extra point to avoid pure white/black</span></a>
<a class="sourceLine" id="cb11-14" title="14">    red &lt;-<span class="st"> </span><span class="kw">seq</span>(colour_rgb[<span class="dv">1</span>], end, <span class="dt">length.out =</span> n <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)[<span class="dv">1</span><span class="op">:</span>n]</a>
<a class="sourceLine" id="cb11-15" title="15">    green &lt;-<span class="st"> </span><span class="kw">seq</span>(colour_rgb[<span class="dv">2</span>], end, <span class="dt">length.out =</span> n <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)[<span class="dv">1</span><span class="op">:</span>n]</a>
<a class="sourceLine" id="cb11-16" title="16">    blue &lt;-<span class="st"> </span><span class="kw">seq</span>(colour_rgb[<span class="dv">3</span>], end, <span class="dt">length.out =</span> n <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)[<span class="dv">1</span><span class="op">:</span>n]</a>
<a class="sourceLine" id="cb11-17" title="17">    </a>
<a class="sourceLine" id="cb11-18" title="18">    <span class="co"># Convert the RGB values to hex codes</span></a>
<a class="sourceLine" id="cb11-19" title="19">    shades &lt;-<span class="st"> </span>grDevices<span class="op">::</span><span class="kw">rgb</span>(red, green, blue, <span class="dt">maxColorValue =</span> <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb11-20" title="20">    </a>
<a class="sourceLine" id="cb11-21" title="21">    <span class="kw">return</span>(shades)</a>
<a class="sourceLine" id="cb11-22" title="22">}</a></code></pre></div>
</div>
<div id="using-the-function" class="section level2">
<h2><span class="header-section-number">3.2</span> Using the function</h2>
<p>Now that we have a function we want to see if it works. Usually when we write
a new function we load it by copying the code to the console or sourcing the
R file. When we are developing a package we want to try and keep our
environment empty so that we can be sure we are only working with objects inside
the package. Instead we can load functions using <code>devtools::load_all()</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">devtools<span class="op">::</span><span class="kw">load_all</span>()</a></code></pre></div>
<p>The function doesn’t appear in the environment, just like all the functions in
a package don’t appear in the environment when we load it using <code>library()</code>.
But if we try to use it the function should work.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">make_shades</span>(<span class="st">&quot;goldenrod&quot;</span>, <span class="dv">5</span>)</a></code></pre></div>
<p>Congratulations, you now have a functional package! In the next section we
will perform some checks to see if we have forgotten anything.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="setting-up.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="checking-you-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["r-pkg-dev.pdf", "r-pkg-dev.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
